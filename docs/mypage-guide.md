# 📊 マイページ 使い方ガイド

## 🚀 アクセス方法

### 1. LINE Botからアクセス
1. **LINE Bot**に「**マイページ**」と送信
2. 返信されたリンクをタップ
3. マイページが開きます

### 2. 直接URLアクセス
- マイページのURLは**署名付き**でセキュリティ保護されています
- 有効期限：**7日間**
- 期限切れの場合は、LINE Botで再度「マイページ」と送信してください

---

## 📱 マイページの機能

### 🎯 ダッシュボード（上部）
**4つのKPIカード**で進捗を一目で確認：

| カード | 内容 | 色 |
|--------|------|-----|
| 🍽 **食事記録** | 直近7日間の食事記録数 | 緑 |
| 💪 **ジム記録** | 直近7日間のジム記録数 | 赤 |
| ⚖️ **体重記録** | 直近7日間の体重記録数 | 黄 |
| 📅 **連続記録日** | 記録がある日数 | 青 |

### 🔧 アクションボタン（中部）
**複数の機能ボタン**で操作：

| ボタン | 機能 | 説明 |
|--------|------|------|
| 📱 **LINE Bot** | 使い方案内 | LINE Botの操作方法を表示 |
| 🚴‍♂️ **HIITプラン** | 直接リンク | 20分サイクリングHIITプランへ |
| 🍽 **ジムメニュー** | 7日間メニュー | 直近7日間のジムメニュー確認 |
| 🍎 **食品データベース** | 学習済み食材 | AIが学習した食材PFC情報 |
| 📋 **買い出し計画** | 週間プラン | 最新の買い出し計画と週間メニュー |
| 📖 **使い方ガイド** | ヘルプ | 詳細な使い方説明 |
| ⚙️ **管理画面** | 管理者用 | システム管理画面（要キー） |
| 🔄 **更新** | データ再読み込み | 最新データに更新 |

### 📊 データ可視化（中部）
**3つのグラフ**で推移を確認：

| グラフ | 内容 | 期間 |
|--------|------|------|
| 📈 **体重推移** | 体重の変化を折れ線グラフで表示 | 過去30日 |
| 📊 **週間PFC推移** | たんぱく質・脂質・炭水化物の摂取量 | 過去7日 |
| 🗓 **ジムアクティビティ** | トレーニング実施日のヒートマップ | 過去30日 |

#### 🔥 ジムカレンダーの使い方（NEW!）
- **ヒートマップ**で過去30日間のジム活動を視覚化
- **緑色のセル**（💪マーク）をタップすると、その日の詳細が表示されます
- **詳細モーダル**には以下が表示されます：
  - 総セット数・総トレーニング時間
  - 種目別の詳細（セット数・回数・重量）
  - 各セットの詳細情報
  - 記録時刻と元のテキストデータ

#### ⏰ ジムログの日付換算
- **AM5:00〜翌日AM4:59**を同じ日として記録
- 例：10/9 AM3:00のトレーニング → 10/8として表示
- 同じ日に複数回ジムに行った場合、自動で合算されます

### 📝 記録一覧（下部）
**直近7日間の記録**を時系列で表示（最新が上）：
- **日時**: JST形式（yyyy/MM/dd HH:mm）
- **種別**: 🍽食事 / 💪ジム / ⚖️体重
- **内容**: 記録した詳細内容
- **PFC情報**: 食事記録にはPFC分析結果も表示

---

## 💡 使い方のコツ

### 📊 進捗確認
- **KPIカード**で週間目標の達成度をチェック
- **連続記録日**で継続状況を把握
- **記録一覧**で詳細な活動履歴を確認

### 🔄 データ更新
- 新しい記録をLINE Botで入力後、**🔄 更新**ボタンで最新データを反映
- ページを再読み込みしても同じ効果

### 📱 LINE Bot連携
- **📱 LINE Bot**ボタンで操作方法を確認
- 記録入力はLINE Botで行い、確認はマイページで行う

---

## 🎯 推奨使用フロー

### 1. 日常の記録
```
LINE Bot → 食事/ジム/体重記録 → マイページで確認
```

### 2. 週間振り返り
```
マイページ → KPIカード確認 → 記録一覧で詳細確認
```

### 3. 新しい機能発見
```
マイページ → アクションボタン → 各機能の使い方を学習
```

---

## ⚠️ 注意事項

### 🔒 セキュリティ
- マイページのURLは**個人専用**です
- 他人と共有しないでください
- 7日で期限切れになるため、定期的に再生成が必要

### 📱 デバイス対応
- **モバイルファースト**設計
- iPhone/Androidで最適表示
- 横スクロール不要のレスポンシブデザイン

### 🔄 データ同期
- LINE Botでの記録は**リアルタイム**で反映
- 反映されない場合は**🔄 更新**ボタンを押してください

---

## 🆘 トラブルシューティング

### Q: マイページが開かない
**A**: LINE Botで「マイページ」と再送信してください

### Q: データが古い
**A**: **🔄 更新**ボタンを押してください

### Q: 記録が表示されない
**A**: LINE Botで記録を入力後、マイページを更新してください

### Q: リンクの有効期限切れ
**A**: LINE Botで「マイページ」と再送信して新しいリンクを取得してください

### Q: ジムカレンダーの日付がずれている
**A**: AM5時基準で日付換算しているため、深夜0〜4時の記録は前日扱いになります

### Q: ジムカレンダーをタップしても反応しない
**A**: 記録がある日（💪マークがある緑色のセル）のみタップ可能です

### Q: 同じ日に複数回ジムに行った場合はどうなる？
**A**: 自動で合算されます。モーダルで総セット数・総時間・種目別詳細を確認できます

---

## 📞 サポート

問題が解決しない場合は、LINE Botに「ヘルプ」と送信してください。

---

**最終更新**: 2025年10月
**バージョン**: 2.0 - ジムカレンダー詳細表示機能追加
