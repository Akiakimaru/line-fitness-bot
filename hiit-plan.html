<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Cycling HIIT 20min — Personal Plan</title>
  
  <!-- Open Graph / Twitter Meta -->
  <meta property="og:title" content="Cycling HIIT 20min — Personal Plan">
  <meta property="og:description" content="Load 8/16/20, HR targets 165–175, 7 sets, 20:00 total.">
  <meta property="og:type" content="website">
  <meta property="og:image" content="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTIwMCIgaGVpZ2h0PSI2MzAiIHZpZXdCb3g9IjAgMCAxMjAwIDYzMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjEyMDAiIGhlaWdodD0iNjMwIiBmaWxsPSIjMUYyOTM3Ii8+CjxyZWN0IHg9IjAiIHk9IjAiIHdpZHRoPSIxMjAwIiBoZWlnaHQ9IjEwMCIgZmlsbD0iIzEwQjk4MSIvPgo8dGV4dCB4PSI2MDAiIHk9IjYwIiBmb250LWZhbWlseT0ic3lzdGVtLXVpLCBzYW5zLXNlcmlmIiBmb250LXNpemU9IjQ4IiBmb250LXdlaWdodD0iYm9sZCIgZmlsbD0id2hpdGUiIHRleHQtYW5jaG9yPSJtaWRkbGUiPkN5Y2xpbmcgSElJVCBQbGFuPC90ZXh0Pgo8dGV4dCB4PSI2MDAiIHk9IjMwMCIgZm9udC1mYW1pbHk9InN5c3RlbS11aSwgc2Fucy1zZXJpZiIgZm9udC1zaXplPSIzNiIgZmlsbD0iI0Y5RkFGQiIgdGV4dC1hbmNob3I9Im1pZGRsZSI+MjAgTWludXRlcyBvZiBIaWdoIEludGVuc2l0eSBJbnRlcnZhbCBUcmFpbmluZzwvdGV4dD4KPC9zdmc+">
  
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Cycling HIIT 20min — Personal Plan">
  <meta name="twitter:description" content="Load 8/16/20, HR targets 165–175, 7 sets, 20:00 total.">
  <meta name="twitter:image" content="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTIwMCIgaGVpZ2h0PSI2MzAiIHZpZXdCb3g9IjAgMCAxMjAwIDYzMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjEyMDAiIGhlaWdodD0iNjMwIiBmaWxsPSIjMUYyOTM3Ii8+CjxyZWN0IHg9IjAiIHk9IjAiIHdpZHRoPSIxMjAwIiBoZWlnaHQ9IjEwMCIgZmlsbD0iIzEwQjk4MSIvPgo8dGV4dCB4PSI2MDAiIHk9IjYwIiBmb250LWZhbWlseT0ic3lzdGVtLXVpLCBzYW5zLXNlcmlmIiBmb250LXNpemU9IjQ4IiBmb250LXdlaWdodD0iYm9sZCIgZmlsbD0id2hpdGUiIHRleHQtYW5jaG9yPSJtaWRkbGUiPkN5Y2xpbmcgSElJVCBQbGFuPC90ZXh0Pgo8dGV4dCB4PSI2MDAiIHk9IjMwMCIgZm9udC1mYW1pbHk9InN5c3RlbS11aSwgc2Fucy1zZXJpZiIgZm9udC1zaXplPSIzNiIgZmlsbD0iI0Y5RkFGQiIgdGV4dC1hbmNob3I9Im1pZGRsZSI+MjAgTWludXRlcyBvZiBIaWdoIEludGVuc2l0eSBJbnRlcnZhbCBUcmFpbmluZzwvdGV4dD4KPC9zdmc+">
  
  <!-- Tailwind CSS CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  
  <!-- Fallback minimal CSS if Tailwind fails -->
  <style>
    @media (prefers-color-scheme: dark) {
      :root { --bg: #1f2937; --text: #f9fafb; --border: #374151; --accent: #10b981; }
    }
    @media (prefers-color-scheme: light) {
      :root { --bg: #ffffff; --text: #111827; --border: #d1d5db; --accent: #059669; }
    }
    
    body { 
      font-family: system-ui, -apple-system, sans-serif; 
      background-color: var(--bg); 
      color: var(--text);
      font-size: 16px;
      line-height: 1.5;
    }
    
    .table-row { min-height: 32px; }
    .table-row:nth-child(even) { background-color: rgba(0,0,0,0.05); }
    @media (prefers-color-scheme: dark) {
      .table-row:nth-child(even) { background-color: rgba(255,255,255,0.05); }
    }
    
    /* Compact table styling */
    .compact-table th, .compact-table td { 
      padding: 2px 4px; 
      font-size: 11px; 
      line-height: 1.2;
      white-space: nowrap;
    }
    .compact-table th { font-size: 10px; font-weight: 600; }
    .compact-table .phase-col { width: 60px; }
    .compact-table .set-col { width: 50px; }
    .compact-table .time-col { width: 70px; }
    .compact-table .load-col { width: 40px; }
    .compact-table .cadence-col { width: 60px; }
    .compact-table .hr-col { width: 70px; }
    .compact-table .notes-col { width: 80px; }
    
    @media print {
      .print\\:block { display: block !important; }
      .print\\:hidden { display: none !important; }
      table { border-collapse: collapse; width: 100%; }
      th, td { border: 1px solid #000; padding: 4px; font-size: 12px; }
      .no-print { display: none !important; }
    }
    
    button { min-height: 44px; min-width: 44px; }
  </style>
</head>

<body class="bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100">
  <!-- SECTION: Header -->
  <header class="bg-green-600 text-white p-4 mb-6">
    <h1 class="text-2xl font-bold mb-2">Cycling HIIT 20min — Personal Plan</h1>
    <p class="text-green-100">今日: <span id="today" class="font-mono"></span></p>
  </header>

  <div class="max-w-4xl mx-auto px-4 pb-8">
    <!-- SECTION: Quick Start -->
    <div class="bg-gray-50 dark:bg-gray-700 rounded-lg p-4 mb-4">
      <h2 class="text-lg font-semibold mb-3">クイックスタート</h2>
      <ul class="space-y-1 mb-4 text-sm">
        <li class="flex items-start">
          <span class="text-red-500 mr-2">●</span>
          <span><strong>高強度：</strong>HR 165–175bpm（負荷20=30s / 負荷16=40s）</span>
        </li>
        <li class="flex items-start">
          <span class="text-blue-500 mr-2">●</span>
          <span><strong>低強度：</strong>HR 120–135bpm（負荷8）</span>
        </li>
        <li class="flex items-start">
          <span class="text-yellow-500 mr-2">●</span>
          <span><strong>連日不可・48h休養</strong></span>
        </li>
      </ul>
      
      <div class="flex gap-3">
        <button id="copyBtn" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg font-medium transition-colors" aria-label="プランをクリップボードにコピー">
          コピー
        </button>
        <button id="printBtn" class="bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-lg font-medium transition-colors" aria-label="プランを印刷">
          印刷
        </button>
      </div>
    </div>

    <!-- SECTION: Plan Table -->
    <div class="mb-4">
      <div class="flex justify-between items-center mb-3">
        <h2 class="text-lg font-semibold">プラン詳細</h2>
        <button id="timeToggle" class="bg-gray-200 dark:bg-gray-600 hover:bg-gray-300 dark:hover:bg-gray-500 text-gray-800 dark:text-gray-200 px-3 py-1 rounded text-sm transition-colors">
          <span id="timeToggleText">秒表示</span>
        </button>
      </div>
      
      <div class="overflow-x-auto">
        <table class="w-full border-collapse border border-gray-300 dark:border-gray-600 compact-table">
          <thead class="bg-gray-100 dark:bg-gray-700 sticky top-0">
            <tr>
              <th class="border border-gray-300 dark:border-gray-600 text-left font-semibold phase-col">フェーズ</th>
              <th class="border border-gray-300 dark:border-gray-600 text-left font-semibold set-col">セット</th>
              <th class="border border-gray-300 dark:border-gray-600 text-left font-semibold time-col">時間</th>
              <th class="border border-gray-300 dark:border-gray-600 text-left font-semibold load-col">負荷</th>
              <th class="border border-gray-300 dark:border-gray-600 text-left font-semibold cadence-col">ケイデンス</th>
              <th class="border border-gray-300 dark:border-gray-600 text-left font-semibold hr-col">心拍数</th>
              <th class="border border-gray-300 dark:border-gray-600 text-left font-semibold notes-col">メモ</th>
            </tr>
          </thead>
          <tbody id="planTableBody">
            <!-- Table rows will be populated by JavaScript -->
          </tbody>
        </table>
      </div>
    </div>

    <!-- SECTION: Variants -->
    <div class="grid md:grid-cols-2 gap-4 mb-4">
      <div class="bg-blue-50 dark:bg-blue-900/20 rounded-lg p-3">
        <h3 class="text-base font-semibold text-blue-800 dark:text-blue-200 mb-2">Easier（簡単版）</h3>
        <ul class="space-y-1 text-xs">
          <li>• 負荷20→16、負荷16→12</li>
          <li>• 高強度時間を30s→20sに短縮</li>
          <li>• セット数を7→5に削減</li>
          <li>• 総時間: 20分→15分</li>
        </ul>
      </div>
      
      <div class="bg-red-50 dark:bg-red-900/20 rounded-lg p-3">
        <h3 class="text-base font-semibold text-red-800 dark:text-red-200 mb-2">Harder（上級版）</h3>
        <ul class="space-y-1 text-xs">
          <li>• 負荷20→24、負荷16→20</li>
          <li>• 高強度時間を40s→50sに延長</li>
          <li>• セット数を7→9に増加</li>
          <li>• 総時間: 20分→25分</li>
        </ul>
      </div>
    </div>

    <!-- SECTION: Tips / Safety -->
    <div class="bg-yellow-50 dark:bg-yellow-900/20 rounded-lg p-3 mb-4">
      <h3 class="text-base font-semibold text-yellow-800 dark:text-yellow-200 mb-2">安全のためのポイント</h3>
      <ul class="space-y-1 text-xs">
        <li>• <strong>フォーム維持：</strong>背筋を伸ばし、肩甲骨を寄せる</li>
        <li>• <strong>立ち漕ぎ回避：</strong>座ったまま一定のリズムを保つ</li>
        <li>• <strong>胸郭の上下：</strong>深い呼吸で酸素供給を確保</li>
        <li>• <strong>痛みが出たら即中止：</strong>膝、腰、首に違和感があれば停止</li>
        <li>• <strong>水分補給：</strong>運動前後とセット間で適切に摂取</li>
      </ul>
    </div>

    <!-- SECTION: Footer -->
    <footer class="text-center text-sm text-gray-500 dark:text-gray-400 border-t border-gray-200 dark:border-gray-700 pt-4">
      <p>Cycling HIIT Plan v1.0 | CC-BY 4.0</p>
    </footer>
  </div>

  <!-- SECTION: Embedded Data -->
  <script>
    // HIIT Plan Data
    const planData = [
      {"phase":"Warm-up","set":"","time":"00:00–03:00","load":"8","cadence":"60–70","hr":"110–125","notes":"体温↑・可動域"},
      {"phase":"HIIT","set":"1 高","time":"03:00–03:30","load":"20","cadence":"95–105","hr":"160→170","notes":"フォーム厳守"},
      {"phase":"HIIT","set":"1 低","time":"03:30–05:00","load":"8","cadence":"60–70","hr":"135→125","notes":"呼吸整える"},
      {"phase":"HIIT","set":"2 高","time":"05:00–05:30","load":"20","cadence":"95–105","hr":"165→175","notes":"出力一定"},
      {"phase":"HIIT","set":"2 低","time":"05:30–07:00","load":"8","cadence":"60–70","hr":"135→125","notes":""},
      {"phase":"HIIT","set":"3 高","time":"07:00–07:40","load":"16","cadence":"95–105","hr":"160→170","notes":"40秒持続"},
      {"phase":"HIIT","set":"3 低","time":"07:40–09:00","load":"8","cadence":"60–70","hr":"135→125","notes":""},
      {"phase":"HIIT","set":"4 高","time":"09:00–09:40","load":"16","cadence":"95–105","hr":"160→170","notes":""},
      {"phase":"HIIT","set":"4 低","time":"09:40–11:00","load":"8","cadence":"60–70","hr":"135→125","notes":""},
      {"phase":"HIIT","set":"5 高","time":"11:00–11:40","load":"16","cadence":"95–105","hr":"160→170","notes":""},
      {"phase":"HIIT","set":"5 低","time":"11:40–13:00","load":"8","cadence":"60–70","hr":"135→125","notes":""},
      {"phase":"HIIT","set":"6 高","time":"13:00–13:40","load":"16","cadence":"95–105","hr":"160→170","notes":""},
      {"phase":"HIIT","set":"6 低","time":"13:40–15:00","load":"8","cadence":"60–70","hr":"135→125","notes":""},
      {"phase":"HIIT","set":"7 高（Fin）","time":"15:00–15:40","load":"20","cadence":"100–110","hr":"170→180未満","notes":"全力"},
      {"phase":"HIIT","set":"7 低","time":"15:40–17:00","load":"8","cadence":"60–70","hr":"140→125","notes":"回復"},
      {"phase":"Cool-down","set":"","time":"17:00–20:00","load":"6→4","cadence":"55–65","hr":"120→110","notes":"足を止めない"}
    ];

    // Time format state
    let showSeconds = false;

    // SECTION: Initialize page
    function init() {
      // Set today's date
      const today = new Date().toLocaleDateString('ja-JP', {
        year: 'numeric',
        month: '2-digit',
        day: '2-digit'
      });
      document.getElementById('today').textContent = today;

      // Render table
      renderTable();

      // Setup event listeners
      document.getElementById('copyBtn').addEventListener('click', copyToClipboard);
      document.getElementById('printBtn').addEventListener('click', () => window.print());
      document.getElementById('timeToggle').addEventListener('click', toggleTimeFormat);
    }

    // SECTION: Table rendering
    function renderTable() {
      const tbody = document.getElementById('planTableBody');
      tbody.innerHTML = '';

      planData.forEach((row, index) => {
        const tr = document.createElement('tr');
        tr.className = 'table-row';
        
        const timeDisplay = showSeconds ? convertToSeconds(row.time) : row.time;
        
        tr.innerHTML = `
          <td class="border border-gray-300 dark:border-gray-600 phase-col">${row.phase}</td>
          <td class="border border-gray-300 dark:border-gray-600 set-col">${row.set}</td>
          <td class="border border-gray-300 dark:border-gray-600 time-col font-mono">${timeDisplay}</td>
          <td class="border border-gray-300 dark:border-gray-600 load-col">${row.load}</td>
          <td class="border border-gray-300 dark:border-gray-600 cadence-col">${row.cadence}</td>
          <td class="border border-gray-300 dark:border-gray-600 hr-col">${row.hr}</td>
          <td class="border border-gray-300 dark:border-gray-600 notes-col">${row.notes}</td>
        `;
        
        tbody.appendChild(tr);
      });
    }

    // SECTION: Time format conversion
    function convertToSeconds(timeStr) {
      // Convert "03:00–03:30" to "180–210s"
      return timeStr.replace(/(\d{2}):(\d{2})/g, (match, min, sec) => {
        const totalSec = parseInt(min) * 60 + parseInt(sec);
        return totalSec + 's';
      });
    }

    // SECTION: Toggle time format
    function toggleTimeFormat() {
      showSeconds = !showSeconds;
      document.getElementById('timeToggleText').textContent = showSeconds ? '分:秒表示' : '秒表示';
      renderTable();
    }

    // SECTION: Copy to clipboard
    function copyToClipboard() {
      const today = new Date().toLocaleDateString('ja-JP');
      let text = `Cycling HIIT 20min Plan - ${today}\n\n`;
      text += `高強度：HR 165–175bpm（負荷20=30s / 負荷16=40s）\n`;
      text += `低強度：HR 120–135bpm（負荷8）\n`;
      text += `連日不可・48h休養\n\n`;
      text += `フェーズ\tセット\t時間\t負荷\tケイデンス\t心拍数\tメモ\n`;
      
      planData.forEach(row => {
        text += `${row.phase}\t${row.set}\t${row.time}\t${row.load}\t${row.cadence}\t${row.hr}\t${row.notes}\n`;
      });
      
      text += `\n総時間: 20:00\n`;
      text += `セット数: 7\n`;
      text += `負荷: 8/16/20\n`;
      text += `心拍数目標: 165–175bpm\n\n`;
      text += `安全のポイント:\n`;
      text += `• フォーム維持：背筋を伸ばし、肩甲骨を寄せる\n`;
      text += `• 立ち漕ぎ回避：座ったまま一定のリズムを保つ\n`;
      text += `• 胸郭の上下：深い呼吸で酸素供給を確保\n`;
      text += `• 痛みが出たら即中止：膝、腰、首に違和感があれば停止\n`;

      navigator.clipboard.writeText(text).then(() => {
        const btn = document.getElementById('copyBtn');
        const originalText = btn.textContent;
        btn.textContent = 'コピー完了!';
        btn.classList.add('bg-green-600', 'hover:bg-green-700');
        btn.classList.remove('bg-blue-600', 'hover:bg-blue-700');
        
        setTimeout(() => {
          btn.textContent = originalText;
          btn.classList.remove('bg-green-600', 'hover:bg-green-700');
          btn.classList.add('bg-blue-600', 'hover:bg-blue-700');
        }, 2000);
      }).catch(err => {
        console.error('Failed to copy: ', err);
        alert('コピーに失敗しました。手動でコピーしてください。');
      });
    }

    // Initialize when DOM is loaded
    document.addEventListener('DOMContentLoaded', init);
  </script>
</body>
</html>
